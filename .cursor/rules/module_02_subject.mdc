# Cursor Rules: Exercises 00–03 — C++ Module 02

## General Module Rules

- **Compiling:** Use `c++` with flags `-Wall -Wextra -Werror -std=c++98`.
- **Headers & Files:** Split class into header (`.hpp/.h`) and source (`.cpp`). No function implementations in headers (except templates). Include guards required.
- **Design:** All classes in **Orthodox Canonical Form** (default ctor, copy ctor, copy assignment, destructor). No `using namespace` and no `friend` unless explicitly allowed.
- **Libraries:** Use standard library; no external libraries; no STL containers/algorithms until Modules 08–09.
- **I/O:** All output must end with a newline and go to stdout.
- **Memory:** Avoid leaks; manage `new`/`delete` if used.
- **Formatting:** Clean, readable code; names per subject; class files named after class in UpperCamelCase.

---

## ex00 — My First Class in Orthodox Canonical Form

### Objective

- Implement **Fixed** (Orthodox Canonical Form) with raw storage and **8 fractional bits**; expose raw accessors.

### Constraints

- Files: `Makefile`, `main.cpp`, `Fixed.{h,hpp}`, `Fixed.cpp`.
- Forbidden functions: **None**.
- Must compile with C++98 flags; outputs end with newline.

### API Spec

- **Private:**
  - `int _raw;`
  - `static const int _fractionalBits = 8;`
- **Public:**
  - Default constructor → `_raw = 0`
  - Copy constructor
  - Copy assignment operator
  - Destructor
  - `int getRawBits(void) const;` (returns `_raw`, logs call per sample)
  - `void setRawBits(int const raw);` (sets `_raw`)

### Behavioral Notes

- Print messages for ctor/dtor/assignment/getRawBits to match sample output spirit.

### Acceptance Criteria

- Exact signatures and canonical form.
- Sample main prints consistent messages and raw values.
- No function bodies in headers (except templates).

---

## ex01 — Towards a more useful fixed-point number class

### Objective

- Extend **Fixed**: construct from `int` and `float`; convert to `float`/`int`; support `operator<<` printing float.

### Constraints

- Files: `Makefile`, `main.cpp`, `Fixed.{h,hpp}`, `Fixed.cpp`.
- Allowed: **`roundf`** from `<cmath>`.
- C++98 flags required.

### API Additions

- **Constructors:**
  - `Fixed(int value);` → `_raw = value << 8`
  - `Fixed(float value);` → `_raw = roundf(value * (1 << 8))`
- **Converters:**
  - `float toFloat(void) const;` → `_raw / float(1 << 8)`
  - `int toInt(void) const;` → `_raw >> 8`
- **I/O:**
  - `std::ostream& operator<<(std::ostream& os, Fixed const& fx);` → inserts `fx.toFloat()`

### Design Notes

- Keep **8 fractional bits** consistently.
- Log messages for constructors to align with sample.

### Acceptance Criteria

- Provided sample main outputs analogous floats (e.g., `42.4219`).
- Correct fixed-point math.
- No STL containers/algorithms.

---

## ex02 — Now we’re talking

### Objective

- Add operator overloading to **Fixed**: comparisons, arithmetic, pre/post ++/--, and static **min/max**.

### Constraints

- Files: `Makefile`, `main.cpp`, `Fixed.{h,hpp}`, `Fixed.cpp`.
- Allowed: **`roundf`** if needed.
- Division by 0 may crash (acceptable).

### Operators

- **Comparisons:** `>`, `<`, `>=`, `<=`, `==`, `!=` — compare `_raw`.
- **Arithmetic:** `+`, `-`, `*`, `/` — return `Fixed`
  - Add/Sub: `_raw ± other._raw`
  - Mul: `( (_raw * other._raw) >> 8 )`
  - Div: `( (_raw << 8) / other._raw )`
- **Increment/Decrement:**
  - Pre-increment: `++a` → `_raw += 1; return *this;`
  - Post-increment: `a++` → copy, `_raw += 1;` return old copy
  - Pre-decrement/Post-decrement analogous with `-=`.

### Static helpers

- `static Fixed& min(Fixed& a, Fixed& b);`
- `static Fixed const& min(Fixed const& a, Fixed const& b);`
- `static Fixed& max(Fixed& a, Fixed& b);`
- `static Fixed const& max(Fixed const& a, Fixed const& b);`

### Acceptance Criteria

- Sample main yields values like:
  - `0`, `1/256 = 0.00390625`, then `0.0078125`, `b = 10.1016`, `max = 10.1016`.
- Correct epsilon step is **1 raw unit** (1/256).

---

## ex03 — BSP

### Objective

- Implement **Point** (Orthodox Canonical Form) using **Fixed** for coordinates; implement `bsp` to test if a point lies strictly inside a triangle.

### Constraints

- Files: `Makefile`, `main.cpp`, `Fixed.{h,hpp}`, `Fixed.cpp`, `Point.{h,hpp}`, `Point.cpp`, `bsp.cpp`.
- Allowed: **`roundf`**.
- Point on vertex or edge → **False**.

### Point Class

- **Private:**
  - `Fixed const _x;`
  - `Fixed const _y;`
  - Any helper if needed.
- **Public:**
  - Default constructor → `(0,0)`
  - Constructor `(float x, float y)`
  - Copy constructor
  - Copy assignment operator
  - Destructor
  - Accessors as needed (e.g., `getX()`, `getY()`)

### `bsp` Function

- Signature: `bool bsp(Point const a, Point const b, Point const c, Point const point);`
- Return `true` if strictly inside; `false` if outside, on edge, or vertex.
- Recommended approach: barycentric or signed area; ensure edge cases return **False**.

### Acceptance Criteria

- Compiles and runs tests.
- Strict interior check honored; edges/vertices excluded.

---

## Common Makefile Notes

- Separate targets: `ex00`, `ex01`, `ex02`, `ex03`.
- Variables: `CXX`, `CXXFLAGS`, `NAME`, `SRCS`, `OBJS`.
- Enforce flags: `-Wall -Wextra -Werror -std=c++98`.
